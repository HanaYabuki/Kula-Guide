# 鸭子类型
> 鸭子类型是 Kula 语言中对 Map 数据容器所做的类型约束。

## 什么是 **鸭子类型**
鸭子类型是一种类型声明，他可以定义一种对 Map数据 的一种约束，通常作为一种对象接口使用。  
**鸭子类型的定义是一个编译期行为，而类型校验则是运行时行为。**

## 声明
鸭子类型的声明十分简单。

```
type <类型名称> {
    [ <属性名称> : <对应类型> , ]
};
```

1. 鸭子类型的声明不是一个表达式，不可以嵌套在其他语义内使用。
2. 鸭子类型的每个属性声明后都必须有逗号，逗号不是分隔符而是必须的。

举例：
```kula
# 这是一个 Point 二维点类型
type Point {
    x: Num,
    y: Num,
};
```

## 使用
鸭子类型被定义后，可以被作为一个类型使用。  
可以用作函数的参数或返回值约束，也可以嵌套定义其他的鸭子类型。

举例：
```kula
# 这个函数可以构造一个符合 Point 接口的 Map 对象
makePoint := func(x: Num, y: Num): Point {
    map := Map.new();
    map|Map.put("x", x);
    map|Map.put("y", y);
    return map;
};
```

```kula
# 这是一个二阶鸭子类型声明，他依赖于另一个鸭子类型
type Vector {
    p1: Point, 
    p2: Point,
};
```

> 注意，鸭子类型的定义是依赖其所需的鸭子类型的，我们不能在定义一个鸭子类型之前就依赖他，这会导致编译失败。

## 更多的？
鸭子类型只作为接口使用，一般不需要把所有的属性都放在类型中做约束。  
很多情况下，鸭子类型只需要对函数做接口即可，需要配合后面提到的 **高阶类型** 使用。

```kula
type Stack {
    push: Func<Any>:None,
    pop: Func<>:Any,
    top: Func<>:Any,
    empty: Func<>:Num,
};
```
